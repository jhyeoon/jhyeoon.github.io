---
layout: post
title:  "통계101 데이터분석 1-3장"
date:   2024-09-15 00:00:01 +0800
categories: jekyll update
---

**#통계101 데이터분석**

# 4장.  추론통계~신뢰구간

추론통계

1. **신뢰구간**
2. 가설검정

## 모집단을 파악하는 방법

### 전수조사

: 기술통계를 통해 모집단의 모든 요소를 조사하여 알고자 하는 성질을 계산하고 평가함으로써 모집단을 파악하는 방법

![image.png](image.png)

### 표본조사

: 추론통계를 통해 모집단의 일부인 표본으로 모집단의 성질을 추정

![image.png](image%201.png)

## 모집단 vs 표본

| 모집단 | 표본 |
| --- | --- |
| 평균 $\mu$ | 표본평균 $\bar{x}$ |
| 표준편차 $\sigma$ | 표본표준편차 $s^2$ |

### 모집단분포

: 모집단을 나타내는 분포

- 모수(파라미터): 모집단 분포를 특정 짓는 양 ex) 모평균, 모분산
    - 모수를 아는 것이 목표이지만 모집단 모두를 조사하는 것은 어려움
    → 표본으로 모수 추정

### 표본

: 모집단분포에서 일부를 추출한 것

---

### 확률분포

: 모집단분포의 세로축의 눈금수/히스토그램에 포함된 모든 요소 개수 → 확률분포의 비율

= 모집단

### 확률 분포를 따르는 실현값

= 표본

---

## 추정

*추론 통계: 얻은 표본으로 모집단 추정 → 얻은 실현값으로 확률분포 추정*

### 모형화

: 모집단분포를 수학적인 확률분포(모형)로 근사하는 것

- 현실 세계 → 수학 세계

### 무작위추출

1. 단순무작위추출법
- 표본에 있는 모든 요소를 목록으로 만들고, 난수를 이용하여 표본을 정하는 방법
- 가장 이상적인 방법
1. 층화추출법
- 모집단을 몇 개의 층으로 나눈 뒤, 각 층에서 필요한 수의 조사대상을 무작위로 추출하는 방법
- 실제로 자주 사용하는 방법

※ 편향된 추출로 만든 표본으로는 모집단을 올바르게 추정할 수 없음

※ 모집단에 대해 추정한 결과를 어느 정도로 일반화할 수 있는가는 각 분야의 도메인 지식에 따라 달라짐

### 추론통계 시 시사점

1. 정말로 알고자 하는 것은 표본 데이터가 아니라 모집단임
2. 모집단의 모든 요소를 다 조사하는 전수조사는 어려움
3. 작은 크기의 표본으로도 모집단을 추론할 수 있음
4. 표본 추출 시 무작위로 추출해야 함

### 추정량

: 모집단의 성질을 추정하는 데 사용하는 통계량

1. 일치추정량
: 표본크기 n을 무한대로 했을 때, 모집단의 성질과 일치하는 추정량
2. 비편향추정량
: 추정량의 평균값(기댓값)이 모집단의 성질과 일치할 때의 추정량
    
    ![image.png](image%202.png)
    
    - 표본평균 $\bar{x}$ = 모집단평균 $\mu$의 비편향추정량 = 비편향평균
    - 표본표준편차 s = 모집단표준편차 $\sigma$의 비편향추정량 = 비편향표준편차
        
        $s = \sqrt{s^2} = \sqrt{\frac{1}{n-1} \sum_{i=1}^{n} (x_i - \bar{x})^2}$
        
        ※ n이 아닌 n-1로 나누는 이유
        원래 $(x_i-\mu)^2$으로 계산해야하는 것을 $(x_i-\bar{x})^2$로 바꾼 것인데 $x_i$가 $\mu$보다 $\bar{x}$에 가깝기 때문에 n보다 작은 n-1로 나누어 과소평가를 보정하기 위해서
        
    

## 표본오차

: $\bar{x}-\mu$

- 표본오차는 확률적으로 바뀜
    
    ex) 동전 뒤집기 확률은 1/2지만, ‘앞1뒤1’이 나올 확률은 1/2, ‘앞2뒤0’이 나올 확률은 1/4, ‘앞0뒤2’가 나올 확률은 1/4
    

### 큰 수의 법칙

: 표본크기 n이 커질수록 표본평균 $\bar{x}$가 모집단평균 $\mu$에 한없이 가까워짐
(표본오차가 0에 한없이 가까워짐)

### 중심극한정리

: 모집단이 어떤 분포이든지, 표본크기 n이 커질수록 표본평균 $\bar{x}$의 분포는 정규분포로 근사할 수 있음 ($\bar{x}$→$\mu$)

$\bar{X}$~$N(\mu, \frac{\sigma}{\sqrt{n}})$

### 표본오차의 분포

표본오차 ~$N(0, \frac{\sigma}{\sqrt{n}})$

- 표준오차: $\frac{\sigma}{\sqrt{n}}$

## 신뢰구간

![image.png](image%203.png)

$0 - 1.96 \times \frac{s}{\sqrt{n}} \leq \bar{x} - \mu \leq 0 + 1.96 \times \frac{s}{\sqrt{n}}$ ← 표본오차의 95%

$\bar{x} - 1.96 \times \frac{s}{\sqrt{n}} \leq \mu \leq \bar{x} + 1.96 \times \frac{s}{\sqrt{n}}$ ← 이 범위에 모집단평균 $\mu$가 있을 확률이 95%

![image.png](image%204.png)

### t분포

: 모집단이 정규분포라는 가정하에, 미지의 모집단 표준편차 $\sigma$를 표본으로 계산한 비편향표준편차 $s$로 대응했을 때, $\bar{x}-\mu$를 표준오차 $s/{\sqrt{n}}$로 나누어 표준화한 값

$t_{n-1}$~$\frac{\sqrt{n}(\bar{x}-\mu)}{s}$

- 표본크기 $\uparrow$ → t분포가 정규분포에 가까워짐
- 정밀도를 높이는 방법 (표준오차 $s/{\sqrt{n}}$ 줄이는 방법)
    - 비편향표준편차 s를 작게
    - 표본크기 n을 크게
- 표본크기 n이 작아도 t분포가 적용가능하려면, 모집단이 정규분포라는 가정이 있어야 함

# 5장. 가설검정

추론통계

1. 신뢰구간
2. **가설검정**

## 가설검정

### 가설

1. 귀무가설(null hypothesis): 밝히고자 하는 가설의 부정 명제
$\mu_A=\mu_B$
ex) 신약에 효과가 없다
2. 대립가설(alternative hypothesis): 밝히고 싶은 가설
$\mu_A\neq\mu_B$
ex) 신약에 효과가 있다

→ 가설검정에서는 귀무가설이 틀렸음을 주장하는 것으로 대립가설을 지지하는 방법 사용

- 포본오차가 존재할 수밖에 없기 때문에, 귀무가설 $\mu_A=\mu_B$이 옳아도 $\bar{x}_A\neq\bar{x}_B$
ex) 약에 아무 효과가 없더라도 $\bar{x}_A-\bar{x}_B\neq0$가 될 수도 있음
→ 표본평균의 차이가 단순한 데이터 퍼짐 때문인지, 약의 효과 때문인지 구별할 필요가 있음
    
    ![image.png](image.png)
    

### p값

: 귀무가설이 옳다고 가정했을 때 관찰한 값 이상으로 극단적인 값이 나올 확률

- p값≤유의수준 → 귀무가설 기각, 대립가설 채택 
→ “통계적으로 유의미한 차이가 있다”
- p값>유의수준 → 귀무가설 기각 없이 판단 보류
→ “통계적으로 유의미한 차이는 발견하지 못했다”
- 이표본 t검정 (p값 계산 방법 예시)
: 2개 집단 간의 평균값을 비교하는 검정
$(\bar{x}_A-\bar{x}_B)-(\mu_A-\mu_B)$
    - 평균 0, 표준편차$s \sqrt{\frac{1}{n_A} + \frac{1}{n_B}}$인 정규분포를 대략적으로 따름
    - $t = \frac{\bar{x}_A - \bar{x}_B}{s \sqrt{\frac{1}{n_A} + \frac{1}{n_B}}}$인 t분포를 따름
    - 비편향표준편차 $s = \sqrt{\frac{(n_A - 1)s_A^2 + (n_B - 1)s_B^2}{n_A + n_B - 2}}$
- 기각역: 주어진 유의 수준에서 통계량이 들어가면 귀무 가설을 기각하게 되는 구간

![image.png](image%201.png)

### 가설검정

1. 양측검정: 양수와 음수 양쪽 고려
2. 단측검정: 한쪽만 고려
- 신뢰구간과 가설검정
    - 신뢰구간은 표본평균으로 모집단평균을 추정하는 것
    - 가설 검정은 모집단평균을 $\mu_A-\mu_B=0$으로 고정했을 때 표본평균이 어떤 값이 될지를 구하는 것
    
    ![image.png](image%202.png)
    

## 가설검정 관련 그래프

### 오차 막대

: 일반적으로 평균값$\pm$표준오차를 그림

1. 막대그래프의 오차 막대

![image.png](image%203.png)

1. 산점도의 오차 막대

![image.png](image%204.png)

(여기서 예1은 귀무가설 기각, 예2는 귀무가설 기각하지 않음)

※ 통계적으로 유의미함은 *: p<0.05, **: p<0.01, ***: p<0.001, 유의미하지 않음은 N.S.로 표기

※ 표본크기 n이 클수록 차이가 작아도 통계적으로 유의미할 가능성이 커짐

![image.png](image%205.png)

## 제1종 오류와 제2종 오류

### 제1종 오류

: 실제로는 차이가 없음에도 차이가 있다고 판단해 버리는 잘못

→ 유의수준 $\alpha$의 값을 미리 정하여, 제1종 오류가 일어날 확률 통제 가능

### 제2종 오류

: 실제로 차이가 있는데 차이가 있다고는 말할 수 없어서 귀무가설을 기각하지 않는 잘못

- 검정력 $1-\beta$: 실제로 차이가 있을 때 차이가 있다고 올바르게 판단할 확률
($\beta$: 제2종 오류가 일어날 확률)
- $\beta$는 직접 통제 불가능

### $\alpha, \beta, n, d$

![image.png](image%206.png)

- 상충관계: $\alpha\uparrow$ → $\beta\downarrow$
- $\alpha$를 고정했을 때, 표본크기 n$\uparrow$ → $\beta\downarrow$→ $(1-\beta)\uparrow$

![image.png](image%207.png)

- $\alpha, \beta, n, d$는 네 개 중 세 개가 정해지면 나머지 하나는 자동으로 정해짐
- 효과크기(d): 일반적으로 얼마나 큰 효과가 있는지를 나타내는 지표
    - $d = \frac{(\mu_A - \mu_B)}{\sigma}$
    - ex) 두 개의 집단을 비교할 때, 평균값의 절대적인 차이가 아닌 상대적으로 평가한 값인 d 이용
- $d\uparrow$ → $\beta\downarrow$
: 효과크기가 클수록 분포가 겹치는 부분이 줄어들어 검출이 간단해져서